
import React, { Component } from 'react';
import PropTypes from 'prop-types';
import {
    AppBar, Toolbar, Typography, List, ListItem,
    withStyles, Grid, SwipeableDrawer
} from '@material-ui/core';
import MenuIcon from '@material-ui/icons/Menu';
import MenuItem from '@material-ui/core/MenuItem';
import styled from 'styled-components';
import Button from '@material-ui/core/Button';

import ListItemIcon from '@material-ui/core/ListItemIcon';
import ListItemText from '@material-ui/core/ListItemText';
import InboxIcon from '@material-ui/icons/MoveToInbox';
import DraftsIcon from '@material-ui/icons/Drafts';
import SendIcon from '@material-ui/icons/Send';


const StyledMenu = withStyles({
    paper: {
        border: '1px solid #d3d4d5',
    },
})((props) => (
    <MenuIcon
        elevation={0}
        getContentAnchorEl={null}
        anchorOrigin={{
            vertical: 'bottom',
            horizontal: 'center',
        }}
        transformOrigin={{
            vertical: 'top',
            horizontal: 'center',
        }}
        {...props}
    />
));

const StyledMenuItem = withStyles((theme) => ({
    root: {
        '&:focus': {
            backgroundColor: theme.palette.primary.main,
            '& .MuiListItemIcon-root, & .MuiListItemText-primary': {
                color: theme.palette.common.white,
            },
        },
    },
}))(MenuItem);

const CustomLogo = styled.img`
  height: ${props => props.height}px;
  display: "flex",
  justifyContent: "space-between"
  
`;
const styleSheet = {
    list: {
        width: 200,
    },
    padding: {
        paddingRight: 30,
        cursor: "pointer",
    },

    sideBarIcon: {
        padding: 0,
        color: "black",
        cursor: "pointer",
    }
}

class AppBarResponsive extends Component {
    constructor(props) {
        super(props);
        this.state = { drawerActivate: false, drawer: false, anchorEl: false };
        this.createDrawer = this.createDrawer.bind(this);
        this.destroyDrawer = this.destroyDrawer.bind(this);
    }



    componentWillMount() {
        if (window.innerWidth <= 600) {
            this.setState({ drawerActivate: true });
        }

        window.addEventListener('resize', () => {
            if (window.innerWidth <= 600) {
                this.setState({ drawerActivate: true });
            }
            else {
                this.setState({ drawerActivate: false })
            }
        });

    }

    //Small Screens
    createDrawer() {
        return (
            <div>
                <AppBar color="#c2c2c2" >
                    <Toolbar>
                        <Grid container direction="row" justify="space-between" alignItems="center">
                            <MenuIcon
                                className={this.props.classes.sideBarIcon}
                                onClick={() => { this.setState({ drawer: true }) }} />
                            <CustomLogo src='https://www.nu.edu/wp-content/uploads/2018/12/national-univeristy-full-logo1.jpg?fit=1200%2C630' height={100} />
                            <Typography color="inherit" variant="headline"></Typography>
                        </Grid>
                    </Toolbar>
                </AppBar>

                <SwipeableDrawer
                    open={this.state.drawer}
                    onClose={() => { this.setState({ drawer: false }) }}
                    onOpen={() => { this.setState({ drawer: true }) }}>

                    <div
                        tabIndex={0}
                        role="button"
                        onClick={() => { this.setState({ drawer: false }) }}
                        onKeyDown={() => { this.setState({ drawer: false }) }}>

                        <List className={this.props.classes.list}>
                            <ListItem key={1} button divider> Option 1 </ListItem>
                            <ListItem key={2} button divider> Option 2 </ListItem>
                            <ListItem key={3} button divider> Option 3 </ListItem>
                        </List>

                    </div>
                </SwipeableDrawer>

            </div>
        );
    }

    //Larger Screens
    destroyDrawer() {
        const handleClick = (event) => {
            console.log("Clicked")
            console.log(this.props.anchorEl)
            this.setState({ anchorEl: true });
        };

        const handleClose = () => {
            console.log("Closed")
            console.log(this.props.anchorEl)
            this.setState({ anchorEl: null });
        };
        const { classes } = this.props
        return (
            <AppBar color="#c2c2c2">
                <Toolbar>
                    <CustomLogo variant="headline" src='https://www.nu.edu/wp-content/uploads/2018/12/national-univeristy-full-logo1.jpg?fit=1200%2C630' height={100} />
                    <div style={{ flexGrow: 1 }} ></div>
                    {/* <Typography variant="headline" style={{ flexGrow: 1 }} color="inherit" >Title</Typography> */}
                    <Button
                        aria-controls="customized-menu"
                        aria-haspopup="true"
                        variant="subheading"
                        color="inherit"
                        onClick={handleClick}
                    >
                        Open Menu
                    </Button>
                    {/* <Typography variant="subheading" className={classes.padding} color="inherit" onClick={handleClick} onClose={handleClose}>OPTION 1</Typography> */}
                    <Typography variant="subheading" className={classes.padding} color="inherit" >OPTION 2</Typography>
                    <Typography variant="subheading" className={classes.padding} color="inherit" >OPTION 3</Typography>
                    <StyledMenu
                        id="customized-menu"
                        anchorEl={this.props.anchorEl}
                        keepMounted
                        open={Boolean(this.props.anchorEl)}
                        onClose={handleClose}
                    >
                        <StyledMenuItem>
                            <ListItemIcon>
                                <SendIcon fontSize="small" />
                            </ListItemIcon>
                            <ListItemText primary="Sent mail" />
                        </StyledMenuItem>
                        <StyledMenuItem>
                            <ListItemIcon>
                                <DraftsIcon fontSize="small" />
                            </ListItemIcon>
                            <ListItemText primary="Drafts" />
                        </StyledMenuItem>
                        <StyledMenuItem>
                            <ListItemIcon>
                                <InboxIcon fontSize="small" />
                            </ListItemIcon>
                            <ListItemText primary="Inbox" />
                        </StyledMenuItem>
                    </StyledMenu>
                </Toolbar>
            </AppBar>
        )
    }

    render() {
        return (
            <div>
                {this.state.drawerActivate ? this.createDrawer() : this.destroyDrawer()}
            </div>
        );
    }
}

AppBarResponsive.propTypes = {
    classes: PropTypes.object.isRequired
};



export default withStyles(styleSheet)(AppBarResponsive);